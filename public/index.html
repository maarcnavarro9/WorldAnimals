<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Animals of the world" />
    <meta name="author" content="Marc Navarro & Ángel Fernández" />
    <title>World Animals</title>
    <link href="./css/styles.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
</head>

<body>
    <header>
        <h1>World Animals</h1>
    </header>
    <main>
        <div class="videoMapContainer">
            <div class="videoContainer">
                <video id="myVideo" width="auto" height="auto" controls>
                    <source id="videoSource"
                        src="https://www.dropbox.com/scl/fi/8tlwf80s82c5de00slryz/WorldAnimalsV1.mp4?rlkey=hb9lsiuozw8fgl56t5mu8j05f&st=437spwh7&raw=1"
                        type="video/mp4">
                    Tu navegador no soporta el elemento de video.
                    <track id="descTrack" kind="subtitles" label="English Subtitles" srclang="en" src="./media/descriptionsV1.vtt" default />
                    <track id="metaTrack" kind="metadata" label="Metadata" src="./media/metadataV1.vtt" />
                </video>
            </div>
            <div>
                <button id="btnVideo1">Video 1</button>
                <button id="btnVideo2">Video 2</button>
            </div>
            <div class="mapa">mapa</div>
        </div>
        <div class="descriptionContainer">
            <img src="./assets/img/portfolio/submarine.png" height="auto" width="100%" />
            <div class="card">
                <div class="nombresContainer">
                    <h2 id="nombre">Nombre</h2>
                    <h3 id="especie">Especie</h3>
                </div>
                <p id="descripcion">El gato siberiano es originario de las frías y remotas regiones de Siberia. Presenta un pelaje
                    muy denso y sedoso que le permite tolerar temperaturas extremas y le brinda protección frente a
                    la nieve. Esta raza es conocida por su carácter afectuoso, sociable y adaptable, lo que la hace
                    ideal como compañera en el hogar. A pesar de ser un gato grande y robusto, se mueve con
                    elegancia y agilidad. Dado su origen, suele disfrutar de actividades al aire libre y, cuando se
                    encuentra en entornos más templados, agradece tener acceso a espacios frescos o con sombra.
                    Posee un instinto cazador notable, heredado de sus antepasados que se enfrentaban a presas y
                    amenazas en hábitats de tundra. Otra característica llamativa es su capacidad para responder al
                    entrenamiento básico, algo poco común en la mayoría de los felinos domésticos, lo que refuerza
                    su reputación de compañero leal y curioso.</p>
            </div>
        </div>
        <div class="card">aaa</div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('myVideo');
            const descTrack = document.getElementById('descTrack');
            const metaTrackElement = document.getElementById('metaTrack');
            const metaTrack = metaTrackElement.track;
        
            const nombreEl = document.getElementById('nombre');
            const especieEl = document.getElementById('especie');
            const descripcionEl = document.getElementById('descripcion');
            
            descTrack.track.mode = "showing";
            metaTrack.mode = "hidden";
        
            // Evento para procesar metadatos
            metaTrack.addEventListener('cuechange', () => {
                const activeCues = metaTrack.activeCues;
                if (activeCues.length > 0) {
                    try {
                        const metadata = JSON.parse(activeCues[0].text);
                        nombreEl.textContent = metadata.Nombre || "Nombre";
                        especieEl.textContent = metadata.Especie || "Especie";
                        descripcionEl.textContent = metadata.Descripcion || "Descripción del animal...";
                    } catch (e) {
                        console.error("Error parsing metadata: ", e);
                    }
                }
            });
        
            // Botón Video 1
            document.getElementById('btnVideo1').addEventListener('click', () => {
                video.src = "https://www.dropbox.com/scl/fi/8tlwf80s82c5de00slryz/WorldAnimalsV1.mp4?rlkey=hb9lsiuozw8fgl56t5mu8j05f&st=7mjqj3jw&raw=1";
                descTrack.src = "./media/descriptionsV1.vtt";
                // Asegúrate de que existe un archivo metadataV1.vtt
                metaTrackElement.src = "./media/metadataV1.vtt";
                video.load();
            });
        
            // Botón Video 2
            document.getElementById('btnVideo2').addEventListener('click', () => {
                video.src = "https://www.dropbox.com/scl/fi/9qes0n0swkkmsa948vnzj/WorldAnimalsV2.mp4?rlkey=iyucl14gz6ykvt64y0xd540cl&st=khtlms8m&raw=1";
                descTrack.src = "./media/descriptionsV2.vtt";
                // Asegúrate de crear o enlazar tu archivo metadataV2.vtt
                metaTrackElement.src = "./media/metadataV2.vtt"; 
                video.load();
            });
        });
    </script>
        
</body>

</html>